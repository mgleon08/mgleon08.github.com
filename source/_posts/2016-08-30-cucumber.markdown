---
layout: post
title: "Cucumber"
date: 2016-08-30 10:23:07 +0800
comments: true
categories: test rails
---

BDD 行為驅動開發工具

<!-- more -->

* Behavior Driven Development BDD 行為驅動開發工具
* Cucumber 通過 Gherkin 語言来描述語句

###好處

* 會說話的程式碼
* 用口語方式寫測試
* 讓溝通更順暢
* 使用人類的語言來描述程式行為
* 明確溝通需求
* 測試即文件
* 消除落差
* 留作紀錄

###Usage

描述行為

```ruby
Feature (功能)             #功能說明, 使用情境
	Scenario(場景，劇本)    #操作方式 特定流程
		Step    (步驟)      #操作步驟
		Given   (假設)      #前情提要, 初始化
		And     (並且)      #更多前情提要
		When    (當)        #執行動作
		And     (並且)      #更多動作 
		Then    (那麼)      #預期結果
		And     (並且)      #更多結果
```

###撰寫測試
```ruby
#features/cucumber.feature
Feature:
  Add two number

  Scenario: Add 1 and 2 should be 3
  Given the first number is 1
  And the second numner is 2
  When calculate two number
  Then result should be 3

```

```ruby
#features/step_definitions/interaction_steps.rb
Given(/^the first number is (\d+)$/) do |num1|
  @num1 = num1.to_i
end

Given(/^the second numner is (\d+)$/) do |num2|
  @num2 = num2.to_i
end

When(/^calculate two number$/) do
  @sum = @num1 + @num2
end

Then(/^result should be (\d+)$/) do |result|
  @sum.should === result.to_i
end
```

```ruby
console
Feature:
  Add two number

  Scenario: Add 1 and 2 should be 3 # features/command_options.feature:4
    Given the first number is 1     # features/step_definitions/interaction_steps.rb:1
    And the second numner is 2      # features/step_definitions/interaction_steps.rb:5
    When calculate two number       # features/step_definitions/interaction_steps.rb:9
    Then result should be 3         # features/step_definitions/interaction_steps.rb:13

1 scenario (1 passed)
4 steps (4 passed)
```


###產表工具
cucumber-html-report

###測試涵蓋率
Istanbul


參考文件：  

* [cucumber github](https://github.com/cucumber/cucumber)
* [cucumber.io](https://cucumber.io/)
* [搞笑談軟工: BDD（2）：大家來吃小黃瓜之Cucumber運作原理](http://teddy-chen-tw.blogspot.tw/2013/07/bdd2cucumber.html)  
* [Cucumber简介](http://icodeit.org/2012/05/cucumber%E7%AE%80%E4%BB%8B/)  
* [醒醒吧少年，只用CUCUMBER不能帮助你BDD](http://insights.thoughtworkers.org/bdd/)
* [Cucumber 经验总结](https://ruby-china.org/topics/7119)
* [10分钟学会 Cucumber+Watir 自动化测试框架](http://www.cnblogs.com/davenkin/archive/2012/02/03/cucumber-watir-in-10-minutes.html)
* [在实际开发中使用RSpec和Cucumber进行TDD/BDD测试](https://danielzhangqinglong.github.io/2015/03/02/rails-test-samples/)
* [如何使用Capybara和Cucumber实现页面级别自动化](http://tauntaunslayer13.me/blog/2014/01/26/ru-he-shi-yong-capybarahe-cucumbershi-xian-ye-mian-ji-bie-zi-dong-hua/)
* [Cucumber小黄瓜页面级自动化测试入门教程](http://tauntaunslayer13.me/blog/2014/03/12/cucumberxiao-huang-gua-ye-mian-ji-zi-dong-hua-ce-shi-ru-men-jiao-cheng/)
* [BDD 實戰經驗分享 MarsZ](https://hackmd.io/p/Bk7gPjMA#/)