---
layout: post
title: "用 Foreman 管理進程"
date: 2016-04-19 22:20:41 +0800
comments: true
categories: rails gem
---

若專案需要啟動多個 process，可以用 foreman 來管理它們。

<!-- more -->

#設定

在根目錄底下新增 `Procfile` 檔案

設定所有要跑的指令

```ruby
#Procfile
web:    bundle exec rails s -p $PORT
worker: bundle exec rake worker
urgentworker: bundle exec rake urgent_worker
scheduler:  bundle exec rake scheduler
```

#安裝gem foreman

```ruby
gem install foreman
```

```ruby
foreman start
13:44:20 web.1          | started with pid 82891
13:44:20 worker.1       | started with pid 82892
13:44:20 urgentworker.1 | started with pid 82893
￼13:44:20 scheduler.1    | started with pid 82894
```

gem：

* [foreman](https://github.com/ddollar/foreman)

參考文件：

* [foreman doc](http://ddollar.github.io/foreman/)
* [Introducing Foreman](http://blog.daviddollar.org/2011/05/06/introducing-foreman.html)
* [Heroku Worker Processes setting](http://arthurpai.logdown.com/posts/2014/07/09/heroku-worker-processes-setting)